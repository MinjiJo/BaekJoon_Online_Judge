package _1.login;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/*
 * @Àº annotationÀ¸·Î ÀÚ¹Ù ÁÖ¼®¹®Ã³·³ ¼Ò½º¾È¿¡ @±âÈ£¿Í ÇÔ²² »ç¿ëµË´Ï´Ù.
 * ÁÖ¼®¹®Ã³·³ ÄÄÆÄÀÏ·¯¿¡ Á¤º¸¸¦ ¾Ë·ÁÁÖ´Â ±â´É ¶Ç´Â ÀÚ¹Ù ÇÁ·Î±×·¥ ½ÇÇà¿¡ °üÇÑ ³»¿ëÀ»
       ¼³Á¤ÇÏ´Â ¿ëµµ·Î »ç¿ëµË´Ï´Ù.
 * @WebServlet ¼³Á¤À» ÅëÇÑ ¼­ºí¸´ Á¢±Ù ¹æ¹ıÀº ¼­ºí¸´ 3.0ºÎÅÍ Áö¿øÇÕ´Ï´Ù.
 * /LifeCycleÀÇ ÀÇ¹Ì´Â
   "http://localhost:8088/JspProject/LifeCycle"·Î ¿äÃ»ÀÌ µé¾î¿À¸é
       ½ÇÇàÇÒ ¼­ºí¸´ÀÌ¶ó´Â ÀÇ¹ÌÀÔ´Ï´Ù.
 */
@WebServlet("/ch3/_1.login/LifeCycleTest")
public class LifeCycleTest extends HttpServlet {
	private static final long serialVersionUID = 1L;
       
    public LifeCycleTest() {
    	super();
        System.out.println("Àú´Â »ı¼ºÀÚÀÔ´Ï´Ù.~~");
    }
    /*
     * Äİ¹é ¸Ş¼Òµå(callback method) - ¾î¶² °´Ã¼¿¡¼­ ¾î¶² »óÈ²ÀÌ ¹ß»ıÇÏ¸é
	       ÄÁÅ×ÀÌ³Ê°¡ ÀÚµ¿À¸·Î È£ÃâÇÏ¿© ½ÇÇàµÇ´Â ¸Ş¼Òµå¸¦ ÀÇ¹ÌÇÕ´Ï´Ù.
                ÀÌ·± Äİ¹é ¸Ş¼ÒµåµéÀÌ ¼­ºí¸´À» ½ÇÇàÇÕ´Ï´Ù.
       - init(), service(), destroy()
         init() -> service() -> destory()
     */
    /*init()¸Ş¼Òµå´Â ¼­ºí¸´ °´Ã¼°¡ »ı¼ºµÈ ´ÙÀ½¿¡ È£ÃâµÇ´Â ¸Ş¼Òµå·Î Å¬¶óÀÌ¾ğÆ®·ÎºÎÅÍ
          ÃÖÃÊ·Î ¼­ºí¸´ ¿äÃ»ÀÌ ÀÖÀ» ¶§ ÇÑ ¹ø ½ÇÇàµË´Ï´Ù.
          ¼­ºí¸´ ÃÊ±âÈ­ ÀÛ¾÷¿¡ »ç¿ëµË´Ï´Ù.
          ÀÌ¹Ì ÀÎ½ºÅÏ½º°¡ Á¸ÀçÇÒ °æ¿ì¿¡´Â »õ·Î ÀÎ½ºÅÏ½º¸¦ »ı¼ºÇÏÁö ¾Ê°í ±âÁ¸ÀÇ ÀÎ½ºÅÏ½º¿¡ ½º·¹µå¸¸
          »õ·Î »ı¼ºÇÕ´Ï´Ù.*/
    public void init() throws ServletException {
		System.out.println("Àú´Â init() ÀÔ´Ï´Ù.");
	}
	
    /*
     - ÀÌ ¸Ş¼­µåÀÇ Ãâ·Â °á°ú¸¦ º¸±â À§ÇØ¼­´Â ÀÌ ÆÄÀÏÀ» ¼öÁ¤ÇÑ µÚ ÀúÀåÇÏ°í ÄÜ¼ÖÀ» ¹Ù¶óº¸¸ç
               Àá½Ã ±â´Ù·Á º¸¼¼¿ä.
     - ¶Ç´Â ¼­¹ö¸¦ ÁßÁö ÇØ º¸¼¼¿ä
     - ¼­ºí¸´ °´Ã¼°¡ ¸Ş¸ğ¸®¿¡¼­ »èÁ¦µÉ ¶§ ½ÇÇàµË´Ï´Ù.
     - ÀÚ¿ø ÇØÁ¦ ÀÛ¾÷ µî¿¡ »ç¿ëµË´Ï´Ù.
     */
    public void destory() {
		System.out.println("Àú´Â destroy() ÀÔ´Ï´Ù.");
	}
    
    /*
           Å¬¶óÀÌ¾ğÆ®ÀÇ ¿äÃ»ÀÌ ÀÖÀ» ¶§¸¶´Ù ½ÇÇàµË´Ï´Ù.
     service()¸Ş¼Òµå°¡ ³¡³ª¸é ¼­¹ö¿¡¼­ÀÇ ½ÇÇàÀº ³¡³³´Ï´Ù.
           ¼­¹ö ÇÁ·Î±×·¥ ½ÇÇàÀÌ ¿Ï·áµÈ ÈÄ¿¡´Â ¼­ºí¸´ ÄÁÅ×ÀÌ³Ê°¡ ½ÇÇà°á°ú¸¦ À¥ ¼­¹ö¿¡ Àü´ŞÇÏ°í
           À¥ ¼­¹ö´Â ¼­ºñ½º¸¦ ¿äÃ»ÇÑ Å¬¶óÀÌ¾ğÆ®¿¡ ÀÀ´äÇÕ´Ï´Ù.
           ÀÌ·Î½á À¥¿¡¼­ ÇÏ³ªÀÇ ¿äÃ»¿¡ ´ëÇÑ Ã³¸®°¡ ¿Ï·áµË´Ï´Ù.
     HTTP ¸Ş¼Òµå¸¦ ÂüÁ¶ÇÏ¿© doGet()À» È£­‚ÇÒÁö, doPost()¸¦ È£ÃâÇÒ Áö °áÁ¤ÇÏ¸ç
           ¿äÃ»ÀÌ ÀÖÀ» ¶§¸¶´Ù È£ÃâµË´Ï´Ù.
           ºê¶ó¿ìÀú¿¡¼­ »õ·Î°íÄ§À» ÇØº¸¼¼¿ä.
     */
    public void service(HttpServletRequest request,
    					HttpServletResponse response)
    				throws ServletException, IOException {
    	System.out.print("Àú´Â service() ÀÔ´Ï´Ù. ~");


    	//method¹æ½Ä¿¡ »ó°ü¾øÀÌ doGet()¸Ş¼­µå È£Ãâ
    	//service()¸Ş¼­µå¸¦ ÁÖ¼®À¸·Î Ã³¸®ÇÏ¸é Á¶»ó Áß
    	//service()°¡ È£ÃâµÇ¾î method ¹æ½Ä¿¡ µû¶ó doPost()
    	//¶Ç´Â doGet()¸Ş¼­µå°¡ ½ÇÇàµË´Ï´Ù.
    	doGet(request, response);
    }
    
    protected void doGet(HttpServletRequest request,
    		HttpServletResponse response)
    			throws ServletException, IOException {
    	//ÀÀ´äÇÏ´Â µ¥ÀÌÅÍ Å¸ÀÔÀÌ htmlÅ¸ÀÔÀÌ°í
    	//charset=euc-kr·Î ÁöÁ¤ÇÏ¸é¼­ ÀÀ´äµÇ´Â µ¥ÀÌÅÍµéÀÇ ÇÑ±Û Ã³¸®¸¦ ÇÑ ºÎºĞÀÔ´Ï´Ù.
    	response.setContentType("text/html;charset=euc-kr");
    	
    	//getParameter() ¸Ş¼­µå :
    	//nameÀ¸·Î Àü¼ÛµÇ¾î ¿Â ÆÄ¶ó¹ÌÅÍ °ªÀ» ¹İÈ¯ÇØ ÁÖ´Â ¸Ş¼­µå ÀÔ´Ï´Ù.
    	//Å¬¶óÀÌ¾ğÆ®¿¡¼­ Àü¼ÛµÇ¾î ¿À´Â id¶ó´Â ÀÌ¸§ÀÇ ÆÄ¶ó¹ÌÅÍ °ª°ú
    	//passwd¶ó´Â ÀÌ¸§ÀÇ ÆÄ¶ó¹ÌÅÍ °ªÀ» ¹Ş´Â ºÎºĞÀÔ´Ï´Ù.
    	String id = request.getParameter("id");
    	String passwd = request.getParameter("passwd");
    	
    	//¹®ÀÚ¿­ ´ÜÀ§·Î response°´Ã¼¿¡ ³»¿ëÀ» Ãâ·ÂÇÒ ¼ö ÀÖ´Â Ãâ·Â ½ºÆ®¸²À» »ı¼ºÇÑ ºÎºĞÀÔ´Ï´Ù.
    	PrintWriter out = response.getWriter();
    	out.println("served at: ");
    	
    	//getContextPath() : À¥ ¾ÖÇÃ¸®ÄÉÀÌ¼Ç °æ·Î Á¤º¸¸¦ ¹İÈ¯ÇÕ´Ï´Ù.
    	out.write("<HTML><HEAD><TITLE>LifeCycleTest</TITLE></HEAD>");
		out.write("<BODY>");
		out.write("Served at: ");
		out.write("¾ÆÀÌµğ=");
		out.write("ºñ¹Ğ¹øÈ£=");
		out.write("</BODY></HTML>");
		out.close();
    }
}